<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/AddDatabaseForm/AddDatabaseForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/AddDatabaseForm/AddDatabaseForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react';
import PropTypes from 'prop-types';
import './AddDatabaseForm.css';
import TextFileInput from '../TextFileInput/TextFileInput';

/**
* Provides a form for adding a new database record to the db (or a span that tell the user that things 
* are loading, when the APIAccessor instance has not yet been provided)
*
*@component
 */
class AddDatabaseForm extends Component
{
	/** Create a new AddDatabaseForm instance */
	constructor(props)
	{
		super(props);
		
		this.state = {
			dbName: "",
			dbJSON: ""
		};
	}
	
	onSubmitHandler(e)
	{
		e.preventDefault();
		this.props.formOnSubmit(this.state.dbName, this.state.dbJSON);
	}
	
	cancelHandler(e)
	{
		e.preventDefault();
		this.props.onCancelHandler();
	}
	
	onDBNameChangeHandler(e)
	{
		this.setState({
			dbName: e.target.value
		});
	}
	
	setJSONText(dbJSON)
	{
		this.setState({
			dbJSON
		});
	}
	
	render()
	{
		//This boolean shouldn't be needed, as the dbName and dbJSON inputs are marked as required.
		//However, it is up to the browser to control that, so just making sure. (in case of future 
		//dev mistake removing the required properties)
		const disableSubmitButton = (this.props.disabled || !this.state.dbName || !this.state.dbJSON);
		
		let formContent;
		
		if(this.props.isLoading)
		{
			formContent = (&lt;span className="infoText">Loading...&lt;/span>);
		}
		else
		{
			formContent = (
				&lt;form onSubmit={this.onSubmitHandler.bind(this)}>
					&lt;input 
						type="text" 
						className="databaseSchemaNameInput" 
						placeholder="Database Schema Name" 
						value={this.state.dbName}
						onChange={this.onDBNameChangeHandler.bind(this)}
						disabled={this.props.disabled}
						maxLength={this.props.dbNameCharLimit}
						required />
					
					&lt;TextFileInput 
						onErrorHandler={this.props.onErrorHandler}
						setFileText={this.setJSONText.bind(this)}
						fileText={this.state.dbJSON}
						disabled={this.props.disabled}
						required={true} />
					
					&lt;input 
						className="databaseSchemaSubmit" 
						type="submit" 
						value={(this.props.isSaving) ? "Saving..." : "Add Database Schema"}
						disabled={disableSubmitButton} />
					&lt;button 
						className="databaseSchemaCancel" 
						onClick={this.cancelHandler.bind(this)}
						disabled={this.props.disabled} >
							Cancel
					&lt;/button>
				&lt;/form>
			);
		}
		
		return (
			&lt;div className="AddDatabaseForm">
				{formContent}
			&lt;/div>
		);
	}
}

AddDatabaseForm.propTypes = {
	/**
	* A function to call when the form is submitted. Should be an asynchronous callback
	* @param {string} dbName - The name for the database record
	* @param {string} dbJSON - The JSON representation generated by the SQL script
	 */
	formOnSubmit: PropTypes.func.isRequired,
	
	/**
	* A function to call if there is an error
	* @param {string} errorText - The error text
	 */
	onErrorHandler: PropTypes.func.isRequired,
	
	/**
	* A function to call if the user cancels the database-creation process
	 */
	onCancelHandler: PropTypes.func.isRequired,
	
	/**
	* Is something still loading (which means we should display "loading" text, instead of the form)?
	 */
	isLoading: PropTypes.bool,
	
	/**
	* Is this form disabled?
	 */
	disabled: PropTypes.bool,
	
	/**
	* Are we currently saving the data?
	 */
	isSaving: PropTypes.bool,
	
	/**
	* The character limit for database record names
	 */
	dbNameCharLimit: PropTypes.number.isRequired
};

export default AddDatabaseForm;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AddDatabaseForm.html">AddDatabaseForm</a></li><li><a href="APIAccessor.html">APIAccessor</a></li><li><a href="App.html">App</a></li><li><a href="DatabaseEntityAccessor.html">DatabaseEntityAccessor</a></li><li><a href="DatabaseJSONValidator.html">DatabaseJSONValidator</a></li><li><a href="DbEntityAnchorMapper.html">DbEntityAnchorMapper</a></li><li><a href="DescribableEntityAccessor.html">DescribableEntityAccessor</a></li><li><a href="EntityElementIdGenerator.html">EntityElementIdGenerator</a></li><li><a href="FilterableSchemaList.html">FilterableSchemaList</a></li><li><a href="JSONArrayValidator.html">JSONArrayValidator</a></li><li><a href="JSONValidator.html">JSONValidator</a></li><li><a href="Queue.html">Queue</a></li><li><a href="SingleItemJSONValidator.html">SingleItemJSONValidator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Aug 24 2021 09:59:46 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
